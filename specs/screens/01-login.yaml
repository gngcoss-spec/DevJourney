version: "2.0"

screen:
  name: 로그인
  route: /login
  layout: full-width
  auth: false

data_requirements:
  - resource: auth_users
    needs: [email]
    auth_required: false

components:
  - id: login_form
    type: form
    position: main
    function: 이메일/비밀번호 로그인 폼
    data_source:
      resource: auth_users
    events:
      - on: submit
        do: Supabase Auth 로그인 → 성공 시 Dashboard(/) 이동
      - on: click:signup_link
        do: /signup으로 이동

connections:
  navigations:
    - from: login_form
      to: /
      condition: 로그인 성공
    - from: login_form
      to: /signup
      condition: 회원가입 링크 클릭

tests:
  - name: 로그인 성공
    when: 올바른 이메일/비밀번호 입력 후 제출
    then:
      - Dashboard(/)로 이동
  - name: 로그인 실패
    when: 잘못된 비밀번호 입력 후 제출
    then:
      - 에러 메시지 표시
      - 폼 유지
  - name: 회원가입 이동
    when: 회원가입 링크 클릭
    then:
      - /signup으로 이동
